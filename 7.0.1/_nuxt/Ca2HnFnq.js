import{r as u,q as m,aV as C,ac as I,d as v,aW as S,aX as $,m as d,aY as p,x as g,ab as k}from"#entry";function b(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function E(){const e=u(),c=m(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:C(e));return{primitiveElement:e,currentElement:c}}const A="data-reka-collection-item";function N(e={}){const{key:c="",isProvider:M=!1}=e,f=`${c}CollectionProvider`;let t;if(M){const n=u(new Map);t={collectionRef:u(),itemMap:n},k(f,t)}else t=I(f);const R=(n=!1)=>{const l=t.collectionRef.value;if(!l)return[];const o=Array.from(l.querySelectorAll(`[${A}]`)),a=Array.from(t.itemMap.value.values()).sort((r,s)=>o.indexOf(r.ref)-o.indexOf(s.ref));return n?a:a.filter(r=>r.ref.dataset.disabled!=="")},h=v({name:"CollectionSlot",setup(n,{slots:l}){const{primitiveElement:o,currentElement:i}=E();return g(i,()=>{t.collectionRef.value=i.value}),()=>d(p,{ref:o},l)}}),w=v({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:l,attrs:o}){const{primitiveElement:i,currentElement:a}=E();return S(r=>{if(a.value){const s=$(a.value);t.itemMap.value.set(s,{ref:a.value,value:n.value}),r(()=>t.itemMap.value.delete(s))}}),()=>d(p,{...o,[A]:"",ref:i},l)}}),x=m(()=>Array.from(t.itemMap.value.values())),y=m(()=>t.itemMap.value.size);return{getItems:R,reactiveItems:x,itemMapSize:y,CollectionSlot:h,CollectionItem:w}}export{E as a,b as g,N as u};
