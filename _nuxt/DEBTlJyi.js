import{d as _,r as c,q as S,x,a7 as M,c as $,w as f,a8 as R,a9 as k,aa as B,o as I,i as n,D as P,_ as Q}from"#entry";import F from"./XTsjbtln.js";import Y from"./CWlZgi5v.js";import E from"./FfqProDb.js";import U from"./DM4ggvH4.js";import V from"./CrshMrC1.js";import A from"./dkMh8LOU.js";import D from"./CH_3uCfS.js";import{s as H}from"./DD8IzUh9.js";import"./DhYsbkfx.js";import"./DyRp4474.js";import"./Cys3SCtC.js";import"./De8Fi2FY.js";const N=_({__name:"SideCatalog",props:{isLoading:{type:Boolean,default:!1},isSelected:{type:Function,default:()=>!1},itemPrefix:{default:"item: "},items:{},label:{},onSelect:{type:Function,default:void 0},query:{type:Function,default:void 0},scrollMarginTop:{default:0},selectedItemLabel:{default:""},withRouteTransition:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:T}){const o=a,q=T,i=R(),d=k(),l=c(),u=c(),s=c(""),C=S(()=>s.value.length>0),L=S(()=>!C.value||!o.query?o.items:o.query(s.value));function w(e,t){if(o.onSelect?.(e,t),q("select",e,t),o.withRouteTransition&&t instanceof MouseEvent){t.preventDefault();const r=t.currentTarget.getAttribute("href");if(r===null)return;const m=new URL(r,window.location.href);m.searchParams.set("query",s.value),m.searchParams.set("parentScrollY",String(l.value?.$el?.scrollTop??0)),window.location.href=m.toString()}}function p(e){s.value=e,g()}const b=B(),v=c(!1),y=()=>{if(v.value||o.isLoading||!(l.value||u.value))return;const e=i.query.parentScrollY;e!==void 0&&e!=="0"&&l.value?.$el&&(l.value.$el.scrollTop=Number(e)),g();const t={...i.query};delete t.parentScrollY,d.replace({query:t}),v.value=!0},g=()=>{const e=o.scrollMarginTop;setTimeout(()=>{if(!(l.value?.$el&&u.value?.$el))return;const t=l.value.$el,h=u.value.$el,r=document.querySelector(`a.${b.active}`);r?(t.scrollTo({behavior:"smooth",top:r.offsetTop-e}),h.scrollTo({behavior:"instant",top:r.offsetTop-e})):t.scrollTo({top:0})},0)};return x(()=>o.isLoading,()=>{if(o.isLoading)return;const e=i.query.query;e&&p(e);const t={...i.query};delete t.query,d.replace({query:t}),y()}),M(()=>{y()}),(e,t)=>(I(),$(D,null,{default:f(()=>[n(F,{ref_key:"contentRef",ref:l},{default:f(()=>[n(U,{"selected-item-label":a.selectedItemLabel,"item-prefix":a.itemPrefix},null,8,["selected-item-label","item-prefix"]),n(A,{ref_key:"itemsList",ref:u},{default:f(()=>[n(Y,{title:a.label},{default:f(()=>[n(V,{placeholder:"Search...","model-value":s.value,"onUpdate:modelValue":p},null,8,["model-value"])]),_:1},8,["title"]),n(E,{items:L.value,"on-select":w,"is-selected":a.isSelected,"is-loading":a.isLoading},null,8,["items","is-selected","is-loading"])]),_:1},512)]),_:1},512),P(e.$slots,"default")]),_:3}))}}),j={$style:H},re=Object.assign(Q(N,[["__cssModules",j]]),{__name:"SideCatalog"});export{re as default};
